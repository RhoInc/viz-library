<!DOCTYPE html>
<html>
    <head>
        <meta
            http-equiv = 'Content-Type'
            content = 'text/html; charset = utf-8'>

        <title>Safety Explorer Charts with Queries</title>
        <div id = 'title'>Safety Explorer Charts with Queries</div>

        <script type = 'text/javascript'
            src = 'https://d3js.org/d3.v3.min.js'></script>
        <script type = 'text/javascript'
            src = 'https://cdn.rawgit.com/RhoInc/Webcharts/master/build/webcharts.js'></script>
        <script type = 'text/javascript'
            src = 'https://cdn.rawgit.com/RhoInc/safety-results-over-time/v2.0.0/build/safetyResultsOverTime.js'></script>

        <link type = 'text/css'
            rel = 'stylesheet'
            href = 'https://cdn.rawgit.com/RhoInc/Webcharts/master/css/webcharts.css'>
        <link type = 'text/css'
            href = '../safetyExplorer.css'
            rel = 'stylesheet'>

        <ul class = 'nav nav-tabs'>
            <li role = 'presentation'><a href = '../ae-table'>AE Table</a></li>
            <li role = 'presentation'><a href = '../ae-timelines'>AE Timelines</a></li>
            <li role = 'presentation' class = 'active'><a href = '../safety-results-over-time'>Results over Time</a></li>
            <li role = 'presentation'><a href = '../safety-histogram'>Histogram</a></li>
            <li role = 'presentation'><a href = '../safety-outlier-explorer'>Outlier Explorer</a></li>
            <li role = 'presentation'><a href = '../safety-shift-plot'>Shift Plot</a></li>
        </ul>
    </head>

    <body>
        <div class = 'safetyExplorerChart'
            id = 'safety-results-over-time'>
            <div class = 'header'></div>
            <div class = 'content'></div>
        </div>
    </body>

    <script>
        var settings =
            {time_settings:
                {value_col: 'VISIT'
                ,label: 'Visit'
                ,order: null // x-axis domain order (array)
                ,rotate_tick_labels: true
                ,vertical_space: 100}
            ,groups:
                [   
                    {value_col: 'NONE', label: 'None'}
                ,   {value_col: 'RACE', label: 'Race'}
                ,   {value_col: 'ARM' , label: 'Arm'}
                ,   {value_col: 'SEX' , label: 'Sex'}
                ]
            ,filters:
            [   {value_col: 'ARM', label: 'Arm'}
            ,   {value_col: 'SITEID', label: 'Site ID'}
            ,   {value_col: 'SEX', label: 'Sex'}
            ,   {value_col: 'RACE', label: 'Race'}
            ,   {value_col: 'QUERYFL', label: 'Open Query?'}]
            };
        d3.csv('../../0000-sample-data/safetyData-queries/ADBDS.csv', function(data) {
            safetyResultsOverTime('#safety-results-over-time .content', settings)
                .init(data);
        });
    </script>
</html>
