<html lang = 'en'>
    <head>
        <title>Clinical Timelines v0.1</title>
        <meta http-equiv = 'Content-Type' content = 'text/html; charset = utf-8'>

        <script type = 'text/javascript' src = 'https://d3js.org/d3.v3.min.js'></script>
        <script type = 'text/javascript' src = 'https://rawgit.com/RhoInc/Webcharts/master/build/webcharts.js'></script>
        <script type = 'text/javascript' src = 'https://cdn.rawgit.com/RhoInc/clinical-timelines/17d1d03a96d19dcd2f2765969c3c4677256881dc/build/clinicalTimelines.js'></script>

        <link type = 'text/css' rel = 'stylesheet' href = 'https://cdn.rawgit.com/RhoInc/Webcharts/master/css/webcharts.css'>
    </head>

    <body>
        <h1>Clinical Timelines</h1>
        <div style = 'position:absolute;top:1em;right:1em;'>
            <a href = 'https://github.com/RhoInc/clinical-timelines'>
                <img src = 'GitHub-Mark-32px.png' height = '16' width = '16'>
            </a>
        </div>

        <div class = 'chart'></div>
    </body>

    <script defer>
        var settings = {
          //ID settings
            id_col: 'USUBJID',
            id_unit: 'participant',
            id_characteristics: null,

          //Event settings
            event_col: 'DOMAIN',
            event_types: ['Adverse Events', 'Concomitant Medications', 'Randomization', 'Study Completion'],
            event_highlighted: 'Randomization',
            event_highlight_color: 'black',

          //Filter settings
            filters: [
                {value_col: 'ARM', label: 'Arm'},
                {value_col: 'SEX', label: 'Sex'},
                {value_col: 'RACE', label: 'Race'}
            ],

          //Grouping settings
            groupings: [
                {value_col: 'SITEID', label: 'Site ID'},
                {value_col: 'ARM', label: 'Arm'},
                {value_col: 'SEX', label: 'Sex'},
                {value_col: 'RACE', label: 'Race'},
                {value_col: 'AGE', label: 'Age'}
            ],
            grouping_initial: 'SITEID',
            grouping_direction: 'horizontal',

          //Timing settings
            time_scale: 'day',

              //Date settings
                stdt_col: 'STDT',
                endt_col: 'ENDT',
                date_range: null,
                date_format: '%Y-%m-%d',
                date_display_format: '%b %y', // sync in syncSettings()

              //Day settings
                stdy_col: 'STDY',
                endy_col: 'ENDY',
                day_range: null,

          //Miscellaneous settings
            seq_col: 'SEQ',
            tooltip_col: 'TOOLTIP',
            ongo_col: 'ONGO',
            ongo_val: 'Y',
            reference_lines: [
                {timepoint: 56, label: 'Randomization'},
                {timepoint: '2016-01-01', label: 'Enrollment Halfway Point'}
            ],
            range_band: 50,

          //Listing settings
            details: null,
            details_config: null,
        };
        d3.csv('../../data/safetyData/ADTIMELINES.csv', function(data) {
            clinicalTimelines('.chart', settings)
                .init(data);
        });
    </script>
</html>
