<!DOCTYPE html>
<html>
    <head>
        <meta
            http-equiv = 'Content-Type'
            content = 'text/html; charset = utf-8'>

        <title>Safety Explorer Charts with Queries</title>
        <div id = 'title'>Safety Explorer Charts with Queries</div>

        <script type = 'text/javascript'
            src = 'https://d3js.org/d3.v3.min.js'></script>
        <script type = 'text/javascript'
            src = 'https://cdn.rawgit.com/RhoInc/Webcharts/master/build/webcharts.js'></script>
        <script type = 'text/javascript'
            src = 'https://cdn.rawgit.com/RhoInc/safety-histogram/47ae0cb7a36d44c7a355079d721420b6ced45f3a/build/safetyHistogram.js'></script>
        <link type = 'text/css'
            rel = 'stylesheet'
            href = 'https://cdn.rawgit.com/RhoInc/Webcharts/master/css/webcharts.css'>
        <link type = 'text/css'
            href = '../safetyExplorer.css'
            rel = 'stylesheet'>

        <ul class = 'nav nav-tabs'>
            <li role = 'presentation'><a href = '../ae-table'>AE Table</a></li>
            <li role = 'presentation'><a href = '../ae-timelines'>AE Timelines</a></li>
            <li role = 'presentation'><a href = '../safety-results-over-time'>Results over Time</a></li>
            <li role = 'presentation' class = 'active'><a href = '../safety-histogram'>Histogram</a></li>
            <li role = 'presentation'><a href = '../safety-outlier-explorer'>Outlier Explorer</a></li>
            <li role = 'presentation'><a href = '../safety-shift-plot'>Shift Plot</a></li>
        </ul>
    </head>

    <body>
        <div class = 'safetyExplorerChart'
            id = 'safety-histogram'>
            <div class = 'header'></div>
            <div class = 'content'></div>
        </div>
    </body>

    <script>
    var settings =
            {filters:
                [   {value_col: 'VISIT',    label: 'Visit'},
                ,   {value_col: 'ARM', label: 'Arm'}
                ,   {value_col: 'SITEID', label: 'Site ID'}
                ,   {value_col: 'SEX', label: 'Sex'}
                ,   {value_col: 'RACE', label: 'Race'}
                ,   {value_col: 'QUERYFL', label: 'Open Query?'}]
            ,details: [
                {value_col: 'USUBJID'     , label: 'Subject ID'},
                {value_col: 'SITEID'      , label: 'Site ID' },
                {value_col: 'SEX'         , label: 'Sex'    },
                {value_col: 'RACE'        , label: 'Race'   },
                {value_col: 'VISIT'       , label: 'Visit'  },
                {value_col: 'DY'          , label: 'Study Day' },
                {value_col: 'STNRLO'      , label: 'LLN' },
                {value_col: 'STRESN'      , label: 'Result'},
                {value_col: 'STNRHI'      , label: 'ULN' },
                {value_col: 'STRESU'      , label: 'Units' },
                {value_col: 'QUERYDETAILS', label: 'Query Details'}]
            };

        d3.csv('../../../../data/safetyData-queries/ADBDS.csv', function(data) {
            data.forEach(function(d){
                d.SEX = ""
            })
            safetyHistogram('div.content', settings).init(data);
        });
    </script>
</html>
